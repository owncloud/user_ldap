default:
  autoload:
    '': %paths.base%/../features/bootstrap

  suites:
    webUICore:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features
      context: &common_ldap_suite_context
        parameters:
          ldapAdminUser: cn=admin,dc=owncloud,dc=com
          ldapAdminPassword: admin
          ldapBaseDN: dc=owncloud,dc=com
          ldapHost: localhost
          ldapHostDrone: ldap
          ldapUsersOU: TestUsers
          ldapGroupsOU: TestGroups
          ldapInitialUserFilePath: /../../config/ldap-users.ldif
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: &common_feature_context_params
            baseUrl:  http://localhost:8080
            adminUsername: admin
            adminPassword: admin
            ocPath: apps/testing/api/v1/occ
            regularUserPassword: 1234
        - EmailContext:
        - FederationContext:
        - WebUIFilesContext:
        - WebUIGeneralContext:
        - WebUILoginContext:
        - WebUIPersonalGeneralSettingsContext:
        - WebUIPersonalSecuritySettingsContext:
        - WebUISearchContext:
        - WebUISharingContext:
        - WebUIUserContext:

    apiMain:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiMain
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params
        - AppManagementContext:
        - CardDavContext:
        - CalDavContext:

    apiMetadataApps:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiMetadataApps
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params

    apiSharees:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiSharees
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params
        - ShareesContext:

    apiShareManagement:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiShareManagement
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params

    apiShareOperations:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiShareOperations
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params

    apiSharingNotifications:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiSharingNotifications
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params
        - NotificationsCoreContext:

    apiTrashbin:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiTrashbin
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params

    apiWebdavOperations:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiWebdavOperations
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params
        - LoggingContext:
        - SearchContext:

    apiWebdavProperties:
      paths:
        - %paths.base%/../../../../../tests/acceptance/features/apiWebdavProperties
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - FeatureContext: *common_feature_context_params
        - LoggingContext:

    webUIUserLDAP:
      paths:
        - %paths.base%/../features/webUIUserLDAP
      context: *common_ldap_suite_context
      contexts:
        - UserLdapGeneralContext:
        - UserLdapUsersContext:
        - FeatureContext: *common_feature_context_params
        - WebUIGeneralContext:
        - WebUILoginContext:
        - WebUIUserContext:
        - WebUISharingContext:
        - WebUIFilesContext:

  extensions:
      jarnaiz\JUnitFormatter\JUnitFormatterExtension:
          filename: report-user_ldap.xml
          outputDir: %paths.base%/../../../../../tests/acceptance/output/

      rdx\behatvars\BehatVariablesExtension: ~